<svg xmlns="http://www.w3.org/2000/svg" width="1223.5" height="2038">
<defs><marker id="arrow-filled" refX="6" refY="3" markerWidth="6" markerHeight="6" orient="auto"><path d="M0,0 6,3 0,6z" style="stroke: none; fill: black;"></path></marker><marker id="arrow-open" refX="6" refY="3" markerWidth="6" markerHeight="6" orient="auto"><path d="M0,0 6,3 0,6" style="stroke-width: 1; fill: none; stroke: black;"></path></marker></defs><rect width="71" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="10" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="45.5" y="39" style="text-anchor: middle; alignment-baseline: central;">client</text></g><rect width="71" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="10" y="1980"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="45.5" y="1999" style="text-anchor: middle; alignment-baseline: central;">client</text></g><path d="M45.5,58 v1922" style="stroke-width: 1; fill: none; stroke: black;"></path><rect width="54" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="123.5" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="150.5" y="39" style="text-anchor: middle; alignment-baseline: central;">flow</text></g><rect width="54" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="123.5" y="1980"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="150.5" y="1999" style="text-anchor: middle; alignment-baseline: central;">flow</text></g><path d="M150.5,58 v1922" style="stroke-width: 1; fill: none; stroke: black;"></path><rect width="173" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="284" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="370.5" y="39" style="text-anchor: middle; alignment-baseline: central;">flow.worker.events</text></g><rect width="173" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="284" y="1980"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="370.5" y="1999" style="text-anchor: middle; alignment-baseline: central;">flow.worker.events</text></g><path d="M370.5,58 v1922" style="stroke-width: 1; fill: none; stroke: black;"></path><rect width="122" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="482.5" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="543.5" y="39" style="text-anchor: middle; alignment-baseline: central;">topic events</text></g><rect width="122" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="482.5" y="1980"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="543.5" y="1999" style="text-anchor: middle; alignment-baseline: central;">topic events</text></g><path d="M543.5,58 v1922" style="stroke-width: 1; fill: none; stroke: black;"></path><rect width="190" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="624.5" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="719.5" y="39" style="text-anchor: middle; alignment-baseline: central;">flow.worker.instance</text></g><rect width="190" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="624.5" y="1980"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="719.5" y="1999" style="text-anchor: middle; alignment-baseline: central;">flow.worker.instance</text></g><path d="M719.5,58 v1922" style="stroke-width: 1; fill: none; stroke: black;"></path><rect width="139" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="834.5" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="904" y="39" style="text-anchor: middle; alignment-baseline: central;">topic instance</text></g><rect width="139" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="834.5" y="1980"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="904" y="1999" style="text-anchor: middle; alignment-baseline: central;">topic instance</text></g><path d="M904,58 v1922" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="98" y="83" style="text-anchor: middle; alignment-baseline: central;">raiseEvent</text></g><path d="M45.5,96 h105" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><path d="M343.5,116 L343.5,123 L350.5,123 L343.5,116 L170.5,116 L170.5,180 L350.5,180 L350.5,123 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="260.5" y="130" style="text-anchor: middle; alignment-baseline: central;">save event object</text><text fill="black" font-family="Helvetica,sans-Serif" x="260.5" y="148" style="text-anchor: middle; alignment-baseline: central;">and add event.raised</text><text fill="black" font-family="Helvetica,sans-Serif" x="260.5" y="166" style="text-anchor: middle; alignment-baseline: central;">to queue</text></g><g><text fill="black" font-family="Helvetica,sans-Serif" x="347" y="205" style="text-anchor: middle; alignment-baseline: central;">event.raised</text></g><path d="M150.5,218 h393" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="457" y="243" style="text-anchor: middle; alignment-baseline: central;">event.raised</text></g><path d="M543.5,256 h-173" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="260.5" y="281" style="text-anchor: middle; alignment-baseline: central;">assignEvent</text></g><path d="M370.5,294 h-220" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><path d="M335,314 L335,321 L342,321 L335,314 L170.5,314 L170.5,396 L342,396 L342,321 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="328" style="text-anchor: middle; alignment-baseline: central;">read event object,</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="346" style="text-anchor: middle; alignment-baseline: central;">get subscriptions</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="364" style="text-anchor: middle; alignment-baseline: central;">and assign event to</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="382" style="text-anchor: middle; alignment-baseline: central;">process/instances</text></g><g><text fill="black" font-family="Helvetica,sans-Serif" x="347" y="421" style="text-anchor: middle; alignment-baseline: central;">instance.requested</text></g><path d="M150.5,434 h393" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="457" y="459" style="text-anchor: middle; alignment-baseline: central;">instance.requested</text></g><path d="M543.5,472 h-173" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="260.5" y="497" style="text-anchor: middle; alignment-baseline: central;">createInstance</text></g><path d="M370.5,510 h-220" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><path d="M335,530 L335,537 L342,537 L335,530 L170.5,530 L170.5,612 L342,612 L342,537 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="544" style="text-anchor: middle; alignment-baseline: central;">create instance and</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="562" style="text-anchor: middle; alignment-baseline: central;">emit event again</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="580" style="text-anchor: middle; alignment-baseline: central;">assigned to this</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="598" style="text-anchor: middle; alignment-baseline: central;">instance</text></g><g><text fill="black" font-family="Helvetica,sans-Serif" x="527.25" y="637" style="text-anchor: middle; alignment-baseline: central;">instance.created</text></g><path d="M150.5,650 h753.5" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="527.25" y="675" style="text-anchor: middle; alignment-baseline: central;">event.raised</text></g><path d="M150.5,688 h753.5" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><path d="M1097,708 L1097,715 L1104,715 L1097,708 L924,708 L924,790 L1104,790 L1104,715 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="1014" y="722" style="text-anchor: middle; alignment-baseline: central;">....further</text><text fill="black" font-family="Helvetica,sans-Serif" x="1014" y="740" style="text-anchor: middle; alignment-baseline: central;">processing of</text><text fill="black" font-family="Helvetica,sans-Serif" x="1014" y="758" style="text-anchor: middle; alignment-baseline: central;">instance.created not</text><text fill="black" font-family="Helvetica,sans-Serif" x="1014" y="776" style="text-anchor: middle; alignment-baseline: central;">in scope...</text></g><g><text fill="black" font-family="Helvetica,sans-Serif" x="811.75" y="815" style="text-anchor: middle; alignment-baseline: central;">event.raised</text></g><path d="M904,828 h-184.5" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="435" y="853" style="text-anchor: middle; alignment-baseline: central;">processEvent</text></g><path d="M719.5,866 h-569" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><path d="M318,886 L318,893 L325,893 L318,886 L170.5,886 L170.5,932 L325,932 L325,893 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="247.75" y="900" style="text-anchor: middle; alignment-baseline: central;">process event and</text><text fill="black" font-family="Helvetica,sans-Serif" x="247.75" y="918" style="text-anchor: middle; alignment-baseline: central;">persist instance</text></g><g><text fill="black" font-family="Helvetica,sans-Serif" x="527.25" y="957" style="text-anchor: middle; alignment-baseline: central;">instance.processed</text></g><path d="M150.5,970 h753.5" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="811.75" y="995" style="text-anchor: middle; alignment-baseline: central;">instance.processed</text></g><path d="M904,1008 h-184.5" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="435" y="1033" style="text-anchor: middle; alignment-baseline: central;">continueInstance</text></g><path d="M719.5,1046 h-569" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><path d="M343.5,1066 L343.5,1073 L350.5,1073 L343.5,1066 L170.5,1066 L170.5,1112 L350.5,1112 L350.5,1073 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="260.5" y="1080" style="text-anchor: middle; alignment-baseline: central;">check if instance is</text><text fill="black" font-family="Helvetica,sans-Serif" x="260.5" y="1098" style="text-anchor: middle; alignment-baseline: central;">completed</text></g><path d="M335,1132 L335,1139 L342,1139 L335,1132 L170.5,1132 L170.5,1232 L342,1232 L342,1139 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="1146" style="text-anchor: middle; alignment-baseline: central;">get new</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="1164" style="text-anchor: middle; alignment-baseline: central;">subscriptions for</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="1182" style="text-anchor: middle; alignment-baseline: central;">intermediate</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="1200" style="text-anchor: middle; alignment-baseline: central;">catching events and</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="1218" style="text-anchor: middle; alignment-baseline: central;">save them on db</text></g><path d="M335,1252 L335,1259 L342,1259 L335,1252 L170.5,1252 L170.5,1316 L342,1316 L342,1259 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="1266" style="text-anchor: middle; alignment-baseline: central;">get new jobs, save</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="1284" style="text-anchor: middle; alignment-baseline: central;">the job objects and</text><text fill="black" font-family="Helvetica,sans-Serif" x="256.25" y="1302" style="text-anchor: middle; alignment-baseline: central;">add them to queue</text></g><path d="M326.5,1336 L326.5,1343 L333.5,1343 L326.5,1336 L170.5,1336 L170.5,1436 L333.5,1436 L333.5,1343 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="252" y="1350" style="text-anchor: middle; alignment-baseline: central;">get thrown events,</text><text fill="black" font-family="Helvetica,sans-Serif" x="252" y="1368" style="text-anchor: middle; alignment-baseline: central;">save event objects</text><text fill="black" font-family="Helvetica,sans-Serif" x="252" y="1386" style="text-anchor: middle; alignment-baseline: central;">and add them as</text><text fill="black" font-family="Helvetica,sans-Serif" x="252" y="1404" style="text-anchor: middle; alignment-baseline: central;">event.raised to</text><text fill="black" font-family="Helvetica,sans-Serif" x="252" y="1422" style="text-anchor: middle; alignment-baseline: central;">queue</text></g><path d="M318,1456 L318,1463 L325,1463 L318,1456 L170.5,1456 L170.5,1502 L325,1502 L325,1463 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="247.75" y="1470" style="text-anchor: middle; alignment-baseline: central;">get new timer and</text><text fill="black" font-family="Helvetica,sans-Serif" x="247.75" y="1488" style="text-anchor: middle; alignment-baseline: central;">save them on db</text></g><g><text fill="black" font-family="Helvetica,sans-Serif" x="527.25" y="1527" style="text-anchor: middle; alignment-baseline: central;">job.created</text></g><path d="M150.5,1540 h753.5" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="527.25" y="1565" style="text-anchor: middle; alignment-baseline: central;">event.raised</text></g><path d="M150.5,1578 h753.5" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><path d="M1097,1598 L1097,1605 L1104,1605 L1097,1598 L924,1598 L924,1716 L1104,1716 L1104,1605 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="1014" y="1612" style="text-anchor: middle; alignment-baseline: central;">....further</text><text fill="black" font-family="Helvetica,sans-Serif" x="1014" y="1630" style="text-anchor: middle; alignment-baseline: central;">processing of raised</text><text fill="black" font-family="Helvetica,sans-Serif" x="1014" y="1648" style="text-anchor: middle; alignment-baseline: central;">events, commited</text><text fill="black" font-family="Helvetica,sans-Serif" x="1014" y="1666" style="text-anchor: middle; alignment-baseline: central;">jobs, reached timers</text><text fill="black" font-family="Helvetica,sans-Serif" x="1014" y="1684" style="text-anchor: middle; alignment-baseline: central;">and received</text><text fill="black" font-family="Helvetica,sans-Serif" x="1014" y="1702" style="text-anchor: middle; alignment-baseline: central;">messages...</text></g><g><text fill="black" font-family="Helvetica,sans-Serif" x="527.25" y="1741" style="text-anchor: middle; alignment-baseline: central;">continueInstance</text></g><path d="M904,1754 h-753.5" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><path d="M343.5,1774 L343.5,1781 L350.5,1781 L343.5,1774 L170.5,1774 L170.5,1820 L350.5,1820 L350.5,1781 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="260.5" y="1788" style="text-anchor: middle; alignment-baseline: central;">check if instance is</text><text fill="black" font-family="Helvetica,sans-Serif" x="260.5" y="1806" style="text-anchor: middle; alignment-baseline: central;">completed</text></g><g><text fill="black" font-family="Helvetica,sans-Serif" x="527.25" y="1845" style="text-anchor: middle; alignment-baseline: central;">instance.completed</text></g><path d="M150.5,1858 h753.5" style="stroke-width: 1; fill: none; stroke: black;" stroke-dasharray="7,4" marker-end="url(#arrow-filled)"></path><path d="M1080,1878 L1080,1885 L1087,1885 L1080,1878 L924,1878 L924,1960 L1087,1960 L1087,1885 Z" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="1005.5" y="1892" style="text-anchor: middle; alignment-baseline: central;">....further</text><text fill="black" font-family="Helvetica,sans-Serif" x="1005.5" y="1910" style="text-anchor: middle; alignment-baseline: central;">processing of</text><text fill="black" font-family="Helvetica,sans-Serif" x="1005.5" y="1928" style="text-anchor: middle; alignment-baseline: central;">instance.completed</text><text fill="black" font-family="Helvetica,sans-Serif" x="1005.5" y="1946" style="text-anchor: middle; alignment-baseline: central;">not in scope...</text></g></svg>